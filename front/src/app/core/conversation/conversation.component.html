<div class="popup" *ngIf="conversation">
  <div class="popup_bg bg_light">
    <div class="close" (click)="onClose()">
      <img src="assets/icons/close.svg">
    </div>
    <div class="header flex align_center center">
      <div class="img_user" appSquareImage [appBackgroundImage]="conversation.contact.profil.lienPhoto"></div>
      <p class="m0 username">{{conversation.contact.username}}</p>
    </div>
    <div class="messages_container">
      <ng-container *ngFor="let message of conversation.messages">
        <div class="flex flex_column" [ngClass]="message.userFrom === curentUser._id ? 'message_user' : 'message_contact'">
        <div class="flex align_center message_header">
          <div class="img_user" appSquareImage [appBackgroundImage]="getUser(message.userFrom).profil.lienPhoto"></div>
          <p class="m0 username">{{getUser(message.userFrom).username}}</p>
        </div>
        <p class="message_text">{{message.message}}</p>
        </div>
      </ng-container>
    </div>
    <div class="input_container flex space_between">
      <textarea appTextareaAutoResize autofocus [(ngModel)]="newMessage.message" rows="2"></textarea>
      <button class="btn hover_primary" (click)="onSendMessage()">envoyer</button>
    </div>
  </div>
</div>
